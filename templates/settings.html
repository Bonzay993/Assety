{% extends "inventory.html" %}

{% block content %}
<div class="settings-container">
    <h2>Settings</h2>

   
 <form id="settings-form">
        <div class="settings-row">
            <label for="dark-mode-toggle">Dark Mode</label>
            <div class="settings-field">
                <input id="dark-mode-toggle" type="checkbox" {% if settings.dark_mode %}checked{% endif %}>
                <label for="dark-mode-toggle">Yes</label>
            </div>
        </div>

        <div class="settings-row">
            <label for="idle-timeout-input">Auto Logout Time (minutes)</label>
            <div class="settings-field">
                <input id="idle-timeout-input" type="number" min="1" max="120" value="{{ settings.timeout or 20 }}">
            </div>
        </div>

        <div class="settings-actions">
            <button type="submit" class="settings-btn save-settings-btn">Save</button>
        </div>
    </form>


   
</div>


<script>
    document.getElementById('settings-form').addEventListener('submit', function (e) {
        e.preventDefault();
        const timeout = document.getElementById('idle-timeout-input').value;
        const darkMode = document.getElementById('dark-mode-toggle').checked;

        fetch('/save-settings', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
         
            body: JSON.stringify({ timeout: parseInt(timeout), dark_mode: darkMode })
        })
        .then(response => {
            if (response.ok) {
                alert('Settings saved.');
            } else {
                alert('Failed to update timeout.');
                alert('Failed to save settings.');
            }
        });
    

      
    });
</script>
{% endblock %}

