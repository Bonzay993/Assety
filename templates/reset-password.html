{% extends "index.html" %}

{% block content %}

<section class="reset">
    <div class="reset-container">
        <h1>Reset Your Password</h1>
        <p class="reset-paragraph">Enter your new password below.</p>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, msg in messages %}
                {% if category == 'reset-error' %}
                    <div class="reset-alert reset-alert-danger">{{ msg }}</div>
                {% elif category == 'reset-success' %}
                    <div class="reset-alert reset-alert-success">{{ msg }}</div>
                {% endif %}
            {% endfor %}
        {% endif %}
        {% endwith %}

        <form action="{{ url_for('reset_password', token=token) }}" method="post" class="reset-form">
            <div class="form-group">
                <i class="fa-solid fa-key"></i>
                <input type="password" id="password" name="password" placeholder="New password" required>
            </div>

            <div class="form-group">
                <i class="fa-solid fa-key"></i>
                <input type="password" id="confirm-password" name="confirm_password" placeholder="Confirm new password" required>
            </div>

            <div id="password-feedback" class="password-feedback" style="display: none;">
                <p id="length-feedback" class="feedback-text">Password must be at least 6 characters long</p>
                <p id="uppercase-feedback" class="feedback-text">Password must contain at least one uppercase letter</p>
                <p id="match-feedback" class="feedback-text">Passwords must match</p>
                <p id="company-feedback" class="feedback-text">Company name in use. Please ask your admin to provide credentials or contact support</p>
            </div>

            <button type="submit" class="reset-btn">Reset Password</button>
        </form>

        <div class="reset-links-container">
            <a class="reset-link" href="{{ url_for('login') }}">Back to Login</a>
        </div>
    </div>
</section>

{% endblock %}

